!function(){var e=void 0,t=void 0;!function i(t,n,o){function r(c,l){if(!n[c]){if(!t[c]){var h="function"==typeof e&&e;if(!l&&h)return h(c,!0);if(s)return s(c,!0);var a=new Error("Cannot find module '"+c+"'");throw a.code="MODULE_NOT_FOUND",a}var f=n[c]={exports:{}};t[c][0].call(f.exports,function(e){var i=t[c][1][e];return r(i?i:e)},f,f.exports,i,t,n,o)}return n[c].exports}for(var s="function"==typeof e&&e,c=0;c<o.length;c++)r(o[c]);return r}({1:[function(e,t,i){"use strict";var n=e("boxzilla"),o=window.boxzilla_options,r=document.body.className.indexOf("logged-in")>-1;r&&o.testMode&&console.log("Boxzilla: Test mode is enabled. Please disable test mode if you're done testing."),n.init();for(var s=0;s<o.boxes.length;s++){var c=o.boxes[s];c.testMode=r&&o.testMode,n.create(c.id,c)}n.create("custom-box",{content:"Well hello",trigger:"percentage",triggerPercentage:50,position:"top-right"}),window.Boxzilla=n},{boxzilla:3}],2:[function(e,t,i){"use strict";function n(e,t){var i={};for(var n in e)i[n]=e[n];for(var n in t)i[n]=t[n];return i}var o=window.jQuery,r={animation:"fade",autoHide:!1,autoShow:!0,content:"",cookieTime:0,icon:"&times",minimumScreenWidth:0,position:"bottom-left",testMode:!1,trigger:"element",unclosable:!1,css:{}},s=function(e,t,i){this.id=e,this.config=n(r,t),this.events=i,this.overlay=document.getElementById("boxzilla-overlay"),this.visible=!1,this.closed=!1,this.triggered=!1,this.triggerHeight=0,this.cookieSet=!1,this.config.autoShow&&""!==this.config.trigger&&("percentage"!==this.config.trigger&&"element"!==this.config.trigger||(this.triggerHeight=this.calculateTriggerHeight(t.triggerPercentage,t.triggerElementSelector)),this.cookieSet=this.isCookieSet()),this.element=this.dom(),this.$element=o(this.element),this.css(),this.init()};s.prototype.init=function(){var e=this;this.$element.find(".boxzilla-close-icon").click(e.dismiss.bind(this)),this.$element.on("click","a",function(t){e.events.trigger("box.interactions.link",[e,t.target])}),this.$element.on("submit","form",function(t){e.setCookie(),e.events.trigger("box.interactions.form",[e,t.target])}),o(document.body).on("click",'a[href="#boxzilla-'+e.id+'"]',function(){return e.toggle(),!1}),this.config.autoShow&&"instant"===this.config.trigger&&!this.cookieSet?o(window).load(this.show.bind(this)):this.locationHashRefersBox()&&o(window).load(this.show.bind(this))},s.prototype.css=function(){var e=this.config.css;e.background_color&&(this.element.style.background=e.background_color),e.color&&(this.element.style.color=e.color),e.border_color&&(this.element.style.borderColor=e.border_color),e.border_width&&(this.element.style.borderWidth=parseInt(e.border_width)+"px"),e.border_style&&(this.element.style.borderStyle=e.border_style),e.width&&(this.element.style.maxWidth=parseInt(e.width)+"px")},s.prototype.dom=function(){var e=document.createElement("div");e.className="boxzilla-container boxzilla-"+this.config.position+"-container";var t=document.createElement("div");t.className="boxzilla boxzilla-"+this.id+" boxzilla-"+this.config.position,t.style.display="none",e.appendChild(t);var i=document.createElement("div");if(i.className="boxzilla-content",i.innerHTML=this.config.content,t.appendChild(i),!this.config.unclosable&&this.config.icon){var n=document.createElement("span");n.className="boxzilla-close-icon",n.innerHTML=this.config.icon,t.appendChild(n)}return document.body.appendChild(e),t},s.prototype.setCustomBoxStyling=function(){this.element.style.overflowY="auto",this.element.style.maxHeight="none";var e=window.innerHeight,t=this.$element.outerHeight();if(t>e&&(this.element.style.maxHeight=e+"px",this.element.style.overflowY="scroll"),"center"===this.config.position){var i=(e-t)/2;i=i>=0?i:0,this.element.style.marginTop=i+"px"}},s.prototype.toggle=function(e){return"undefined"==typeof e&&(e=!this.visible),this.$element.is(":animated")?!1:e===this.visible?!1:!e&&this.config.unclosable?!1:(this.visible=e,this.setCustomBoxStyling(),"center"===this.config.position&&o(this.overlay).fadeToggle("slow"),this.events.trigger("box."+(e?"show":"hide"),[this]),"fade"===this.config.animation?this.$element.fadeToggle("slow"):this.$element.slideToggle("slow"),!0)},s.prototype.show=function(){return this.toggle(!0)},s.prototype.hide=function(){return this.toggle(!1)},s.prototype.calculateTriggerHeight=function(e,t){if("element"===this.config.trigger){var i=o(t).first();return i.length>0?i.offset().top:0}return e/100*o(document).height()},s.prototype.setCookie=function(){if(this.config.cookieTime){var e=new Date;e.setDate(e.getDate()+this.config.cookieTime),document.cookie="boxzilla_box_"+this.id+"=true; expires="+e.toUTCString()+"; path=/"}},s.prototype.locationHashRefersBox=function(){if(!window.location.hash||0===window.location.hash.length)return!1;var e=window.location.hash.substring(1);return e===this.element.id?!0:!!this.element.querySelector("#"+e)},s.prototype.mayAutoShow=function(){return this.config.autoShow?this.closed?!1:this.config.minimumScreenWidth>0&&window.innerWidth<this.config.minimumScreenWidth?!1:!this.cookieSet:!1},s.prototype.mayAutoHide=function(){return this.config.autoHide?this.triggered:!1},s.prototype.isCookieSet=function(){if(this.config.testMode)return!1;if(0===this.config.cookieTime)return!1;var e="true"===document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*boxzilla_box_"+this.id+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");return e},s.prototype.dismiss=function(){this.hide(),this.setCookie(),this.closed=!0,this.events.trigger("box.dismiss",[this])},t.exports=s},{}],3:[function(e,t,i){"use strict";function n(e,t,i){t||(t=250);var n,o;return function(){var r=i||this,s=+new Date,c=arguments;n&&n+t>s?(clearTimeout(o),o=setTimeout(function(){n=s,e.apply(r,c)},t)):(n=s,e.apply(r,c))}}function o(e){27==e.keyCode&&dismissAllBoxes()}function r(){var e=window.scrollY,t=e+.9*d;for(var i in f){var n=f[i];n.mayAutoShow()&&(n.triggerHeight<=0||(t>n.triggerHeight?n.visible||(n.show(),n.triggered=!0):n.mayAutoHide()&&n.visible&&n.hide()))}}function s(){d=window.innerHeight;for(var e in f){var t=f[e];t.setCustomBoxStyling()}}function c(e){var t=e.offsetX,i=e.offsetY;for(var n in f){var o=f[n],r=o.element.getBoundingClientRect(),s=100+.05*window.innerWidth;(t<r.left-s||t>r.right+s||i<r.top-s||i>r.bottom+s)&&o.dismiss()}}var l=window.jQuery,h=e("./Box.js"),a=e("wolfy87-eventemitter"),f={},u=!1,d=window.innerHeight,g=document.createElement("div"),m=Object.create(a.prototype);m.init=function(){u||(g.id="boxzilla-overlay",document.body.appendChild(g),l(window).bind("scroll",n(r)),l(window).bind("resize",n(s)),l(window).bind("load",s),l(document).keyup(o),l(g).click(c),u=!0,m.trigger("ready"))},m.create=function(e,t){f[e]=new h(e,t,this)},m.dismiss=function(e){"undefined"==typeof e?f.forEach(function(e){e.dismiss()}):"object"==typeof f[e]&&f[e].dismiss()},m.hide=function(e){"undefined"==typeof e?f.forEach(function(e){e.hide()}):"object"==typeof f[e]&&f[e].hide()},m.show=function(e){"undefined"==typeof e?f.forEach(function(e){e.show()}):"object"==typeof f[e]&&f[e].show()},m.toggle=function(e){"undefined"==typeof e?f.forEach(function(e){e.toggle()}):"object"==typeof f[e]&&f[e].toggle()},"undefined"!=typeof t&&t.exports?t.exports=m:this.Boxzilla=m},{"./Box.js":2,"wolfy87-eventemitter":4}],4:[function(e,i,n){(function(){"use strict";function e(){}function n(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function o(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,s=this,c=s.EventEmitter;r.getListeners=function(e){var t,i,n=this._getEvents();if(e instanceof RegExp){t={};for(i in n)n.hasOwnProperty(i)&&e.test(i)&&(t[i]=n[i])}else t=n[e]||(n[e]=[]);return t},r.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},r.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&(t={},t[e]=i),t||i},r.addListener=function(e,t){var i,o=this.getListenersAsObject(e),r="object"==typeof t;for(i in o)o.hasOwnProperty(i)&&-1===n(o[i],t)&&o[i].push(r?t:{listener:t,once:!1});return this},r.on=o("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=o("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var i,o,r=this.getListenersAsObject(e);for(o in r)r.hasOwnProperty(o)&&(i=n(r[o],t),-1!==i&&r[o].splice(i,1));return this},r.off=o("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,i){var n,o,r=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(n=i.length;n--;)r.call(this,t,i[n]);else for(n in t)t.hasOwnProperty(n)&&(o=t[n])&&("function"==typeof o?r.call(this,n,o):s.call(this,n,o));return this},r.removeEvent=function(e){var t,i=typeof e,n=this._getEvents();if("string"===i)delete n[e];else if(e instanceof RegExp)for(t in n)n.hasOwnProperty(t)&&e.test(t)&&delete n[t];else delete this._events;return this},r.removeAllListeners=o("removeEvent"),r.emitEvent=function(e,t){var i,n,o,r,s,c=this.getListenersAsObject(e);for(r in c)if(c.hasOwnProperty(r))for(i=c[r].slice(0),o=i.length;o--;)n=i[o],n.once===!0&&this.removeListener(e,n.listener),s=n.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},r.trigger=o("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return s.EventEmitter=c,e},"function"==typeof t&&t.amd?t(function(){return e}):"object"==typeof i&&i.exports?i.exports=e:s.EventEmitter=e}).call(this)},{}]},{},[1])}();
//# sourceMappingURL=script.min.js.map
